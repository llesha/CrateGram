<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>CrateGram</title>
    <!-- <script src="https://kit.fontawesome.com/fcd79d1b18.js" crossorigin="anonymous"></script> -->

    <link rel="stylesheet" href="css/colors.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/interactive.css">

    <!-- <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@500&display=swap" rel="stylesheet"> -->
    <script type="module" src="js/interpreter/Interpreter.js"></script>
    <script type="text/javascript" src="monaco-editor/min/vs/loader.js"></script>
    <link rel="icon" type="image/svg+xml" href="resources/crategram-ico.svg">
</head>

<body data-theme="light" style="background-color: var(--bg-color);">
    <div id="main">
        <div class="left panel no-scroll">
            <div>
                <svg class="hoverable clickable" id="menu-button" xmlns="http://www.w3.org/2000/svg" height="2em"
                    viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                    <path fill="var(--main-color)"
                        d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z" />
                </svg>
            </div>
            <div id="menu" class="hidden">
                <div class="unselectable menu-element outline-top">
                    <span id="playground" class="clickable hoverable">Playground</span>
                </div>
                <div class="menu-element">
                    <div>
                        <svg class="menu-right" xmlns="http://www.w3.org/2000/svg" height="1em"
                            viewBox="0 0 320 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                            <path fill="var(--main-color)"
                                d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z" />
                        </svg>

                        <span class="unselectable clickable hoverable expandable" id="tasks-button">Grammar tasks</span>
                    </div>
                    <div id="grammar-tasks">
                        <div class="indent">
                            <svg class="menu-right" xmlns="http://www.w3.org/2000/svg" height="1em"
                                viewBox="0 0 320 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <path fill="var(--main-color)"
                                    d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z" />
                            </svg>
                            <span class="unselectable descr clickable hoverable expandable" descr="Start with these tasks
                            
                            <strong>Dictionary: 01</strong>" id="binary-tasks">Binary</span>
                        </div>
                        <div class="task-list" style="display:none">
                            <div class="indent2"><span class="unselectable clickable hoverable">B-1</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">B-2</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">B-3</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">B-4</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">B-5</span></div>
                        </div>
                        <div class="indent">
                            <svg class="menu-right" xmlns="http://www.w3.org/2000/svg" height="1em"
                                viewBox="0 0 320 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <path fill="var(--main-color)"
                                    d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z" />
                            </svg>
                            <span class="unselectable clickable hoverable expandable">Other</span>
                        </div>
                        <div class="task-list" style="display:none">
                            <div class="indent2">
                                <span class="unselectable clickable hoverable descr"
                                    descr="<strong>Dictionary: 0123456789</strong>">sequence</span>
                            </div>
                            <div class="indent2">
                                <svg class="locked-task" id="unlock-sequence" xmlns="http://www.w3.org/2000/svg"
                                    height="1em"
                                    viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                    <path fill="var(--main-color)"
                                        d="M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z" />
                                </svg>
                                <span class="unselectable clickable hoverable descr"
                                    descr="<strong>Dictionary: 0123456789</strong>">sequence-2</span>
                            </div>
                            <div class="indent2">
                                <span class="unselectable clickable hoverable descr"
                                    descr="<strong>Dictionary: ()</strong>">parentheses</span>
                            </div>
                            <div class="indent2">
                                <svg class="locked-task" id="unlock-parentheses" xmlns="http://www.w3.org/2000/svg"
                                    height="1em"
                                    viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                    <path fill="var(--main-color)"
                                        d="M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z" />
                                </svg>
                                <span class="unselectable clickable hoverable descr"
                                    descr="<strong>Dictionary: ()[]{}<></strong>">parentheses-2</span>
                            </div>
                        </div>
                        <div class="indent">
                            <svg id="cater-tasks" class="menu-right" xmlns="http://www.w3.org/2000/svg" height="1em"
                                viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <path fill="var(--main-color)"
                                    d="M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z" />
                            </svg>

                            <span class="unselectable descr clickable hoverable expandable" descr="Set of tasks taken from
                         a brilliant game <a href=https://play.google.com/store/apps/details?id=org.gromozeka1980.caterpillar_logic&hl=en&gl=US>Caterpillar logic</a>.
                         This project is heavily inspired by it.
                         
                         <strong>Dictionary: 1234</strong>">Caterpillar logic</span>
                        </div>
                        <div class="task-list" style="display:none">
                            <div class="indent2"><span class="unselectable clickable hoverable">CL-2</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">CL-3</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">CL-4</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">CL-6</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">CL-8</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">CL-9</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">CL-10</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">CL-11</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">CL-12</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">CL-13</span></div>
                            <div class="indent2"><span class="unselectable clickable hoverable">CL-14</span></div>
                        </div>
                    </div>
                </div>
                <div class="hidden unselectable settings-input menu-element unselectable outline-top">
                    <p class="descr search-name" descr="Which characters are not recognized by `.`. 
                    Not needed For tasks">Dot exceptions:</p>
                    <div style="cursor: text; display: inline;">
                        <span style="color:var(--bracket-color); cursor: text;">[</span>
                        <input id="dot-exceptions-input" class="unselectable">
                        <span style="color:var(--bracket-color); cursor: text;">]</span>
                    </div>
                </div>
                <div class="unselectable settings-input menu-element unselectable outline-top">
                    <p class="search-name">Font size</p>
                    <input id="font-input" class="unselectable" type="number">
                </div>
                <div style="display: none;" class="unselectable settings-input menu-element unselectable outline-top">
                    <p class="search-name" descr="How much time after last typed before updating input or grammar">
                        Debounce (ms)</p>
                    <input id="debounce-input" class="unselectable" type="number">
                </div>
                <div class="unselectable settings-input menu-element">
                    <p class="search-name">Theme</p>
                    <span id="theme-button" class="clickable hoverable">light</span>
                </div>
                <div class="unselectable settings-input menu-element">
                    <p class="search-name descr" descr="AST is Abstract Syntax Tree,
                    a form of representation of parsed text">Show AST</p>
                    <label class="switch">
                        <input id="ast-toggle" type="checkbox">
                        <span class="slider round" style="margin-top: 3.5px; margin-bottom: -3.5px"></span>
                    </label>
                </div>
                <div style="padding-bottom: 0.5em; border-top: var(--gray) solid 1px; padding-top: 0.5em">
                    <div id="help" class="clickable hoverable">
                        <span style="text-decoration: underline; color: var(--middle-color);">Help</span>
                        <svg xmlns="http://www.w3.org/2000/svg" height="0.7em"
                            viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                            <path fill="var(--middle-color)"
                                d="M432 48H208c-17.7 0-32 14.3-32 32V96H128V80c0-44.2 35.8-80 80-80H432c44.2 0 80 35.8 80 80V304c0 44.2-35.8 80-80 80H416V336h16c17.7 0 32-14.3 32-32V80c0-17.7-14.3-32-32-32zM48 448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V256H48V448zM64 128H320c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V192c0-35.3 28.7-64 64-64z" />
                        </svg>
                    </div>
                </div>
                <div id="help" class="hoverable"
                    style="border-radius: 0.5em; padding: 0.2em; padding-top: 0.1em; padding-bottom: 0.1em;">
                    <a href="https://github.com/llesha/CrateGram">github</a>
                </div>

            </div>
        </div>
        <div class="right panel">
            <div>
                <span class="" id="current-task">Playground</span>
                <span id="error-test-text" class="error"></span>
                <span id="solved-text" class="complete descr" descr=""
                    style="display: none; cursor: default;">Solved</span>
            </div>
            <div></div>
            <div class="main-grid">
                <div>
                    <div id="editor"></div>
                    <div class="status-line">
                        <span id="add-input" style="align-self: center;" class="unselectable hoverable clickable">add
                            test</span>
                        <!-- <span style="float: left; padding-top: 0.1em;">|</span> -->
<<<<<<< HEAD
                        <span id="grammar-error" style="white-space: pre-wrap; align-self: center;" descr=""
                            class="error descr"></span>
=======
                        <span id="grammar-error" style="white-space: pre-wrap; align-self: center;" descr="" class="error descr"></span>
>>>>>>> d5c6c77c43f740602a725cf9901ad25a5edee575
                        <!-- <span style="float: left; padding-top: 0.1em;">|</span> -->
                        <span id="grammar-type" class="unselectable hoverable clickable"
                            style="display: none; align-self: center;">my grammar</span>
                        <!-- <label style="float:right" class="switch">
                        <input id="grammar-toggle" type="checkbox">
                        <span class="slider round"></span>
                    </label> -->
                    </div>
                    <div id="text-editor"></div>
                    <div style="width: 100%;">
                        <div class="inline-row">
                            <div class="status-grid">
                                <div class="unselectable grid-cell grid-left">
                                    <i class="hidden fa-solid fa-xmark to-left" style="position:absolute;"></i>
                                    <div style="text-align: center;">Valid</div>
                                </div>
                            </div>
                        </div>
                        <div class="inline-row" style="float:right">
                            <div class="status-grid">
                                <div class="unselectable grid-cell grid-right">
                                    <i class="hidden fa-solid fa-xmark to-left" style="position:absolute;"></i>
                                    <div style="text-align: center;">Invalid</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="ast">
                </div>
            </div>
        </div>
        <div style="width:5%">
            <svg id="spinner" style="position:absolute; float: right; display: none" xmlns="http://www.w3.org/2000/svg"
                height="1em"
                viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                <path fill="var(--light-gray)"
                    d="M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z" />
            </svg>
        </div>
    </div>
    <div id="descr"></div>
    <script type="module" src="js/loader.js"></script>
    <script type="module" src="js/index.js"></script>
    <script type="module" src="js/editor/editor.js"></script>
    <div id="help-text" class="hidden">
        <button>x</button>
        <p>A parse utility for <a href="https://pdos.csail.mit.edu/~baford/packrat/popl04/peg-popl04.pdf">PEG
                parsers</a>, which includes:</p>
        <ol>
            <li>Grammar tasks</li>
            <li>PEG Playground</li>
            <li>Abstract syntax tree of input text</li>
        </ol>
        <h2 id="grammar-tasks">Grammar tasks</h2>
        <p>Grammar tasks are inspired by the <a
                href="https://play.google.com/store/apps/details?id=org.gromozeka1980.caterpillar_logic&hl=en&gl=US">Caterpillar
                logic</a> game. </p>
        <p>In each task, a user has to construct a grammar that would be similar to a task grammar (which is hidden) by
            testing different inputs. For each input the program says whether it is valid for the task grammar or not.
            To make it easier, each task already has 5 valid and invalid inputs. </p>
        <h3 id="example">Example</h3>
        <p>Suppose we are given a task, and we know that following inputs are valid:</p>
        <pre style="background-color: var(--light-gray); border-radius: 0.5em;"><code>        01010101
        101
        11100001
        110101011
        00110</code></pre>

        <p>And following are invalid:</p>
        <pre style="background-color: var(--light-gray); border-radius: 0.5em;"><code>        0
        1
        1111
        00
        0000</code></pre>
        <p>We can assume that input is valid if it contains both 1 and 0.
            Let&#39;s create a grammar and test it:</p>
        <div class="grammar-display">
            <div style="top:0px;height:22px;" class="view-line"><span><span class="mtk1 mtkb">root</span><span
                        class="mtk1">&nbsp;</span><span class="operator">=</span><span
                        class="mtk1">&nbsp;(zeroStart&nbsp;</span><span class="operator">/</span><span
                        class="mtk1">&nbsp;oneStart)&nbsp;</span><span class="operator">!</span><span
                        class="mtk1">.</span></span></div>
            <div style="top:22px;height:22px;" class="view-line"><span><span class="mtk1">zeroStart&nbsp;</span><span
                        class="operator">=</span><span class="mtk1">&nbsp;</span><span class="string">"0"</span><span
                        class="mtk7">+</span><span class="mtk1">&nbsp;</span><span class="string">"1"</span><span
                        class="operator">+</span><span class="mtk1">&nbsp;any</span></span></div>
            <div style="top:44px;height:22px;" class="view-line"><span><span class="mtk1">oneStart&nbsp;</span><span
                        class="operator">=</span><span class="mtk1">&nbsp;</span><span class="string">"1"</span><span
                        class="operator">+</span><span class="mtk1">&nbsp;</span><span class="string">"0"</span><span
                        class="operator">+</span><span class="mtk1">&nbsp;any</span></span></div>
            <div style="top:66px;height:22px;" class="view-line"><span><span class="mtk1">any&nbsp;</span><span
                        class="operator">=</span><span class="mtk1">&nbsp;</span><span class="bracket">[01]</span><span
                        class="operator">*</span></span></div>
        </div>
        <p>We get: <code class="error">WA: 101</code>.
            It is wrong because we need even number of ones. Therefore, this grammar should work:</p>

        <div class="grammar-display" data-mprt="7">
            <div style="top:0px;height:22px;" class="view-line"><span><span class="mtk1 mtkb">root</span><span
                        class="mtk1">&nbsp;</span><span class="operator">=</span><span
                        class="mtk1">&nbsp;(zeroFirst&nbsp;</span><span class="operator">/</span><span
                        class="mtk1">&nbsp;zeroMiddle&nbsp;</span><span class="operator">/</span><span
                        class="mtk1">&nbsp;zeroLast)&nbsp;</span><span class="operator">!</span><span
                        class="mtk1">.</span></span></div>
            <div style="top:22px;height:22px;" class="view-line"><span><span class="mtk1">ones&nbsp;</span><span
                        class="operator">=</span><span class="mtk1">&nbsp;(</span><span class="string">"1"</span><span
                        class="mtk1">&nbsp;</span><span class="string">"0"</span><span class="operator">*</span><span
                        class="mtk1">&nbsp;</span><span class="string">"1"</span><span class="mtk1">)</span></span>
            </div>
            <div style="top:44px;height:22px;" class="view-line"><span><span class="mtk1">zeroFirst&nbsp;</span><span
                        class="operator">=</span><span class="mtk1">&nbsp;</span><span class="string">"0"</span><span
                        class="operator">+</span><span class="mtk1">&nbsp;ones&nbsp;ones</span><span
                        class="operator">*</span><span class="mtk1">&nbsp;</span><span class="string">"0"</span><span
                        class="operator">*</span></span></div>
            <div style="top:66px;height:22px;" class="view-line"><span><span class="mtk1">zeroLast&nbsp;</span><span
                        class="operator">=</span><span class="mtk1">&nbsp;</span><span class="string">"0"</span><span
                        class="operator">*</span><span class="mtk1">&nbsp;ones&nbsp;ones</span><span
                        class="operator">*</span><span class="mtk1">&nbsp;</span><span class="string">"0"</span><span
                        class="operator">+</span></span></div>
            <div style="top:88px;height:22px;" class="view-line"><span><span class="mtk1">zeroMiddle&nbsp;</span><span
                        class="operator">=</span><span class="mtk1">&nbsp;</span><span class="string">"11"</span><span
                        class="operator">*</span><span class="mtk1">&nbsp;(</span><span class="string">"1"</span><span
                        class="mtk1">&nbsp;</span><span class="string">"0"</span><span class="operator">+</span><span
                        class="mtk1">&nbsp;</span><span class="string">"1"</span><span class="mtk1">)</span><span
                        class="operator">+</span><span class="mtk1">&nbsp;</span><span class="string">"11"</span><span
                        class="operator">*</span></span></div>
        </div>
    </div>
    <div id="copy-notification" style="display:none">Copied!</div>
</body>

</html>